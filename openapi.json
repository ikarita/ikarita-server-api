{"openapi":"3.0.1","info":{"title":"Ikarita Server API","version":"1"},"servers":[{"url":"http://localhost:8080"}],"tags":[{"name":"Communities","description":"Access and management of communities."},{"name":"Users","description":"Access and management of local users."}],"paths":{"/api/v1/community/roles":{"put":{"tags":["Users","Communities"],"operationId":"saveRole","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewCommunityRoleDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommunityRoleDto"}}}}}}},"/api/v1/users":{"get":{"tags":["Users"],"operationId":"getUsers","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}}}}}}},"post":{"tags":["Users"],"operationId":"createUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewUserDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/api/v1/users/roles":{"post":{"tags":["Users"],"operationId":"addRoleToUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewCommunityRoleForUserDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/api/v1/token/refresh":{"post":{"tags":["Token"],"operationId":"refreshToken","responses":{"200":{"description":"OK"}}}},"/api/v1/communities":{"get":{"tags":["Communities"],"summary":"Fetches all communities.","operationId":"getCommunities","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommunityDto"}}}}}}},"post":{"tags":["Communities"],"summary":"Creates a community.","operationId":"createCommunity","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewCommunityDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommunityDto"}}}}}}},"/api/v1/communities/deactivate/{communityId}":{"post":{"tags":["Communities"],"summary":"Deactivates a community a community.","operationId":"deactivateCommunity","parameters":[{"name":"communityId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommunityDto"}}}}}}},"/api/v1/communities/{communityId}":{"get":{"tags":["Communities"],"summary":"Fetches a community by its ID.","operationId":"getCommunity","parameters":[{"name":"communityId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommunityDto"}}}}}}},"/api/v1/users/ban/{userId}":{"delete":{"tags":["Users"],"operationId":"banUser","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}}},"components":{"schemas":{"CommunitySimpleDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}}},"NewCommunityRoleDto":{"type":"object","properties":{"name":{"type":"string"},"community":{"$ref":"#/components/schemas/CommunitySimpleDto"}}},"CommunityRoleDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}}},"NewUserDto":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"}}},"Community":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"users":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/CommunityUser"}},"public":{"type":"boolean"},"active":{"type":"boolean"}}},"CommunityRole":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"permissions":{"type":"array","items":{"type":"string","enum":["DATA_READ","DATA_ADD","DATA_EDIT","DATA_DELETE","USER_READ","USER_ADD","USER_EDIT","USER_DELETE"]}},"community":{"$ref":"#/components/schemas/Community"}}},"CommunityUser":{"type":"object","properties":{"developerProjectId":{"$ref":"#/components/schemas/CommunityUserId"},"localUser":{"$ref":"#/components/schemas/LocalUser"},"community":{"$ref":"#/components/schemas/Community"},"communityRoles":{"type":"array","items":{"$ref":"#/components/schemas/CommunityRole"}}}},"CommunityUserId":{"type":"object","properties":{"userId":{"type":"integer","format":"int64"},"communityId":{"type":"integer","format":"int64"}}},"LocalUser":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"userRoles":{"uniqueItems":true,"type":"array","items":{"type":"string","enum":["VIEWER","CONTRIBUTOR","MODERATOR","ADMIN"]}},"communities":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/CommunityUser"}},"banned":{"type":"boolean"}}},"UserDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"userRoles":{"type":"array","items":{"type":"string","enum":["VIEWER","CONTRIBUTOR","MODERATOR","ADMIN"]}},"communityRoles":{"type":"array","items":{"$ref":"#/components/schemas/CommunityRole"}}}},"NewCommunityRoleForUserDto":{"type":"object","properties":{"username":{"type":"string"},"roleName":{"type":"string"}}},"NewCommunityDto":{"type":"object","properties":{"name":{"type":"string"},"public":{"type":"boolean"}}},"CommunityDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"public":{"type":"boolean"}}}}}}